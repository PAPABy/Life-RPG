<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Life RPG</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#0b0f1a;
  color:white;
  font-family:Arial,sans-serif;
  padding:20px;
}
.card{
  background:#11162a;
  border-radius:24px;
  padding:20px;
  max-width:500px;
  margin:auto;
  position:relative;
}
h1{text-align:center}

/* AVATAR */
.avatar{
  width:90px;height:90px;
  border-radius:50%;
  margin:10px auto;
  background:linear-gradient(135deg,#00ffcc,#0066ff);
  display:flex;align-items:center;justify-content:center;
  font-size:40px;
}
.avatar img{
  width:100%;height:100%;
  border-radius:50%;object-fit:cover;
}

/* BUTTONS */
.uploadBtn,.reset-avatar-btn{
  width:100%;margin-top:8px;padding:8px;
  border-radius:12px;font-size:14px;
}
.uploadBtn{background:#1f2440;text-align:center}
.reset-avatar-btn{
  background:#141a33;border:1px solid #2a3058;color:#bfc6ff;
}

/* TABS */
.tabs{display:flex;gap:10px;margin:10px 0 20px}
.tabs button{
  flex:1;background:#1f2440;border:none;color:white;
  padding:10px;border-radius:12px;
}
.tabs button.active{background:#00ffcc;color:black}

/* MOOD */
.mood-box{
  margin-top:20px;padding:14px;border-radius:18px;
  background:#141a33;border:1px solid #2a3058;
}
.mood-options{
  display:flex;justify-content:space-between;margin-top:10px;
}
.mood-options button{
  font-size:22px;background:#1f2440;border:none;
  border-radius:12px;padding:10px;
}
.mood-options button.active{background:#00ffcc;color:black}

/* GAME */
.exp-bar{height:14px;background:#1f2440;border-radius:10px;overflow:hidden}
.exp-fill{height:100%;background:#ffd700;width:0%;transition:.3s}
.quest{
  background:#1a1f3c;padding:12px;border-radius:14px;
  margin-top:10px;display:flex;justify-content:space-between;
}
</style>
</head>

<body>
<div class="card">

<div class="avatar" id="avatar">ğŸ§™</div>

<label class="uploadBtn">
Ganti Avatar
<input type="file" id="avatarUpload" hidden>
</label>

<button id="resetAvatar" class="reset-avatar-btn">â™»ï¸ First Profile</button>

<h1>Life RPG</h1>
<div style="text-align:center;color:#00ffcc">RANK: NOVICE</div>

<div class="tabs">
<button id="tabStats" class="active">Stats</button>
<button id="tabGame">Game</button>
</div>

<div id="statsMode">
  <div class="mood-box">
    <strong>ğŸŒ¤ï¸ Mood Hari Ini</strong>
    <div class="mood-options">
      <button data-mood="great">ğŸ˜„</button>
      <button data-mood="good">ğŸ™‚</button>
      <button data-mood="neutral">ğŸ˜</button>
      <button data-mood="tired">ğŸ˜«</button>
      <button data-mood="bad">ğŸ˜”</button>
    </div>
  </div>

  <div class="mood-box" id="aiMessage">
    Mulai bangun karaktermu hari ini.
  </div>
</div>

<div id="gameMode" style="display:none">
  <div class="exp-bar"><div id="expFill" class="exp-fill"></div></div>
  <div id="levelText" style="margin:8px 0"></div>
  <div id="quests"></div>
</div>

</div>

<script>
const savedMood = localStorage.getItem("lifeRPG_mood");
if(savedMood) currentMood = savedMood;

/* ===== STATE ===== */
let avatarData=null;
let currentMood="neutral";
let game={level:1,exp:0,expMax:100,completed:{}};

const avatar=document.getElementById("avatar");
const expFill=document.getElementById("expFill");
const levelText=document.getElementById("levelText");
const questsBox=document.getElementById("quests");

const aiCoachMessages = {
  great: [
    "Energi kamu tinggi. Manfaatkan hari ini untuk naik level.",
    "Hari bagus untuk menyelesaikan quest sulit."
  ],
  good: [
    "Konsistensi lebih penting dari kecepatan.",
    "Sedikit progres hari ini lebih baik daripada nol."
  ],
  neutral: [
    "Mulai dari satu tugas kecil.",
    "Bangun momentum, jangan tunggu mood sempurna."
  ],
  tired: [
    "Kurangi beban. Satu quest sudah cukup.",
    "Istirahat juga bagian dari progres."
  ],
  bad: [
    "Pelan tidak apa-apa. Yang penting tidak berhenti.",
    "Rawat diri dulu sebelum mengejar target."
  ]
};

/* ===== TAB LOGIC ===== */
tabStats.onclick=()=>{
  tabStats.classList.add("active");
  tabGame.classList.remove("active");
  statsMode.style.display="block";
  gameMode.style.display="none";
};

tabGame.onclick=()=>{
  tabGame.classList.add("active");
  tabStats.classList.remove("active");
  statsMode.style.display="none";
  gameMode.style.display="block";
  renderGame();
};

/* ===== MOOD ===== */
document.querySelectorAll(".mood-options button").forEach(btn=>{
  btn.onclick=()=>{
  document.querySelectorAll(".mood-options button")
    .forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
localStorage.setItem("lifeRPG_mood", currentMood);

  currentMood = btn.dataset.mood;
  updateAICoach();
};

/* ===== AVATAR ===== */
avatarUpload.onchange=e=>{
  const r=new FileReader();
  r.onload=()=>{avatar.innerHTML=`<img src="${r.result}">`;};
  r.readAsDataURL(e.target.files[0]);
};
resetAvatar.onclick=()=>{avatar.innerText="ğŸ§™";};

/* ===== GAME ===== */
function renderGame(){
  expFill.style.width=(game.exp/game.expMax*100)+"%";
  levelText.innerText=`Level ${game.level} â€¢ ${game.exp}/${game.expMax}`;
  questsBox.innerHTML="";
  ["Discipline","Physical","Mental"].forEach(q=>{
    questsBox.innerHTML+=`
    <div class="quest">
      <span>${q}</span>
      <button onclick="gainExp()">Done</button>
    </div>`;
  });
}

function updateAICoach() {
  const box = document.getElementById("aiMessage");
  let msgPool = aiCoachMessages[currentMood] || aiCoachMessages.neutral;
  let msg = msgPool[Math.floor(Math.random() * msgPool.length)];

  // tambahan pintar berbasis game state
  if (game.exp / game.expMax > 0.8) {
    msg += " Kamu hampir naik level ğŸ”¥";
  }

  if (game.level >= 5) {
    msg += " Fokuskan pada kualitas, bukan kuantitas.";
  }

  box.innerText = msg;
}
function gainExp(){
  game.exp += 25;

  if(game.exp >= game.expMax){
    game.exp = 0;
    game.level++;
  }

  renderGame();
  updateAICoach();
}

</script>
</body>
</html>
